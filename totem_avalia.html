<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Avalia√ß√£o Rio Quality</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@700;900&family=Poppins:wght@400;600&display=swap" rel="stylesheet">

    <style>
        /* GERAL */
        body {
            /* Fonte do corpo do texto: Poppins Regular */
            font-family: 'Poppins', sans-serif; 
            margin: 0;
            padding: 0;
            background-color: #f4f7f6; /* Fundo levemente esverdeado/cinza para combinar */
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            color: #444;
        }

        .container {
            background: white;
            padding: 50px;
            border-radius: 30px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.08); /* Sombra mais difusa */
            width: 90%;
            max-width: 750px;
            text-align: center;
        }

        /* TIPOGRAFIA DA MARCA */
        h1 { 
            font-family: 'Inter', sans-serif; 
            font-weight: 900; /* Inter Black para T√≠tulos */
            font-size: 2.2rem; 
            margin-bottom: 10px; 
            color: #2d3436;
            text-transform: uppercase; /* Deixa o t√≠tulo mais imponente */
            letter-spacing: -1px;
        }
        
        h2 {
            font-family: 'Inter', sans-serif;
            font-weight: 700; /* Inter Bold para Subt√≠tulos */
            color: #444;
            margin-bottom: 20px;
        }

        p { 
            font-family: 'Poppins', sans-serif;
            color: #666; 
            margin-bottom: 40px; 
            font-size: 1.1rem; 
        }

        /* LAYOUT DOS BOT√ïES */
        .botoes-wrapper {
            display: flex;
            justify-content: center;
            gap: 40px; /* Mais espa√ßo entre os bot√µes */
            margin-bottom: 20px;
        }

        /* ESTILO DOS BOT√ïES CIRCULARES COM A NOVA IDENTIDADE */
        .btn-main {
            width: 240px;
            height: 240px;
            border-radius: 50%;
            border: none;
            color: white;
            cursor: pointer;
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
            transition: transform 0.2s, box-shadow 0.2s;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
            overflow: hidden;
        }

        /* Efeito de brilho sutil no topo para parecer 3D (estilo bot√£o da imagem) */
        .btn-main::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, rgba(255,255,255,0.2), transparent);
            border-radius: 50%;
        }

        .btn-main:active { transform: scale(0.96); }

        .icon { font-size: 4rem; margin-bottom: 15px; display: block; filter: drop-shadow(0 2px 4px rgba(0,0,0,0.2)); }
        
        .btn-label { 
            font-family: 'Inter', sans-serif; /* T√≠tulo do bot√£o em Inter */
            font-weight: 900;
            font-size: 1.3rem; 
            text-transform: uppercase; 
            letter-spacing: 0.5px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        /* CORES DA MARCA */
        
        /* Bot√£o Cliente: Degrad√™ Laranja/Amarelo */
        .btn-cliente { 
            background: linear-gradient(135deg, #FF8C00 0%, #FFD700 100%); 
        } 
        
        /* Bot√£o Fornecedor: Degrad√™ Verde */
        .btn-fornecedor { 
            background: linear-gradient(135deg, #009E4D 0%, #00C853 100%); 
        }

        /* --- √ÅREA DE NOTAS --- */
        #tela-avaliacao, #tela-agradecimento { display: none; }

        .notas-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 12px;
            margin-bottom: 30px;
        }

        .btn-nota {
            font-family: 'Inter', sans-serif;
            font-weight: 700;
            width: 60px;
            height: 60px;
            font-size: 1.4rem;
            background: white;
            border-width: 3px;
            border-style: solid;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
            color: #555;
            border-color: #eee;
        }

        .btn-nota:hover { transform: translateY(-3px); }

        /* L√≥gica das Cores (1-4 Vermelho, 5-7 Amarelo, 8-10 Verde) */
        
        .nota-ruim { border-color: #e74c3c; color: #e74c3c; }
        .nota-ruim.selecionado { background-color: #e74c3c; color: white; border-color: #e74c3c; }

        .nota-media { border-color: #f1c40f; color: #f1c40f; }
        .nota-media.selecionado { background-color: #f1c40f; color: white; border-color: #f1c40f; }

        /* Verde das notas combinando com a marca */
        .nota-boa { border-color: #009E4D; color: #009E4D; }
        .nota-boa.selecionado { background-color: #009E4D; color: white; border-color: #009E4D; }

        textarea {
            width: 90%;
            height: 100px;
            padding: 15px;
            border: 2px solid #eee;
            background-color: #fafafa;
            border-radius: 15px;
            resize: none;
            outline: none;
            font-family: 'Poppins', sans-serif;
            font-size: 1rem;
        }
        
        textarea:focus { border-color: #009E4D; background: white; }

        .btn-enviar {
            background: linear-gradient(135deg, #333 0%, #000 100%);
            color: white;
            padding: 15px 60px;
            font-size: 1.1rem;
            font-weight: 600;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            margin-top: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            font-family: 'Poppins', sans-serif;
        }

        .btn-voltar {
            background: transparent;
            border: none;
            color: #999;
            margin-top: 20px;
            cursor: pointer;
            text-decoration: underline;
            font-family: 'Poppins', sans-serif;
        }
        
        /* --- ALERTA PERSONALIZADO (Modal) --- */
.modal-overlay {
    display: none; /* Escondido por padr√£o */
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background-color: rgba(0, 0, 0, 0.5); /* Fundo escuro transparente */
    z-index: 9999;
    justify-content: center;
    align-items: center;
}

.modal-box {
    background: white;
    padding: 40px;
    border-radius: 20px;
    text-align: center;
    width: 80%;
    max-width: 400px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.3);
    animation: aparecer 0.3s ease-out;
}

/* Anima√ß√£o suave de entrada */
@keyframes aparecer {
    from { transform: scale(0.8); opacity: 0; }
    to { transform: scale(1); opacity: 1; }
}

.modal-titulo {
    font-family: 'Inter', sans-serif;
    font-weight: 900;
    font-size: 1.5rem;
    color: #e74c3c; /* Vermelho alerta */
    margin-bottom: 15px;
}

.modal-texto {
    font-family: 'Poppins', sans-serif;
    color: #555;
    margin-bottom: 30px;
    font-size: 1.1rem;
}

.btn-modal-ok {
    background: #333;
    color: white;
    padding: 12px 40px;
    border: none;
    border-radius: 50px;
    font-family: 'Poppins', sans-serif;
    font-weight: 600;
    cursor: pointer;
    font-size: 1rem;
}

/* --- TECLADO VIRTUAL --- */
/* --- TECLADO VIRTUAL (Vers√£o Compacta) --- */
#teclado-virtual {
    display: none;
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    background-color: #e0e0e0;
    
    /* MUDAN√áA 1: Menos espa√ßo em cima e em baixo no container */
    padding: 5px 0 0 0; 
    
    box-shadow: 0 -5px 15px rgba(0,0,0,0.1);
    z-index: 1000;
    flex-direction: column;
    align-items: center;
    gap: 5px; /* Espa√ßo menor entre as linhas */
    animation: subir 0.3s ease-out;
}

@keyframes subir {
    from { transform: translateY(100%); }
    to { transform: translateY(0); }
}

.linha-teclas {
    display: flex;
    justify-content: center;
    gap: 4px; /* Teclas mais juntinhas */
    width: 98%; /* Ocupa quase toda a largura */
    margin-bottom: 5px; /* Espa√ßo para a pr√≥xima linha */
}

.tecla {
    font-family: 'Inter', sans-serif;
    font-weight: 600;
    background: white;
    border: none;
    border-radius: 6px;
    
    /* MUDAN√áA 2: Altura fixa menor para as teclas n√£o ficarem gigantes */
    height: 45px; 
    padding: 0; /* Remove o enchimento interno */
    
    width: 9%; /* Ajuste fino na largura */
    font-size: 1.1rem;
    color: #333;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    cursor: pointer;
    
    /* Centralizar o texto dentro da tecla fixa */
    display: flex;
    align-items: center;
    justify-content: center;
}

.tecla:active {
    background-color: #ddd;
    transform: translateY(2px);
}

.tecla-espaco { width: 45%; }
.tecla-apagar { background-color: #ffcccc; color: #d32f2f; width: 12%; }
.tecla-fechar { background-color: #009E4D; color: white; width: 15%; font-size: 0.9rem; }

.tecla-espaco { width: 40%; }
.tecla-apagar { background-color: #ffcccc; color: #d32f2f; width: 13%; }
.tecla-fechar { background-color: #009E4D; color: white; width: 15%; font-size: 1rem; }

/* --- CORRE√á√ÉO PARA TABLET DEITADO (PAISAGEM) --- */
@media (orientation: landscape) {
    
    /* Diminui o container do teclado */
    #teclado-virtual {
        padding: 2px 0; /* Quase sem borda */
        gap: 2px;       /* Gruda mais as linhas */
        background-color: rgba(224, 224, 224, 0.95); /* Leve transpar√™ncia */
    }

    /* Teclas mais baixas e compactas */
    .tecla {
        padding: 0;       /* Remove enchimento extra */
        height: 45px;     /* Altura fixa menor */
        font-size: 1rem;  /* Letra um pouco menor */
        display: flex;
        align-items: center; /* Centraliza o texto verticalmente */
        justify-content: center;
        margin-bottom: 2px;
    }

    /* Ajusta o campo de texto para n√£o sumir */
    textarea {
        height: 60px; /* Diminui a altura do campo de texto na horizontal */
    }

    /* (Opcional) Esconde o t√≠tulo principal quando digitar na horizontal para dar espa√ßo */
    /* Isso ajuda muito em tablets velhos */
    .esconder-na-horizontal {
        display: none;
    }
}
    </style>
</head>
<body>

    <div class="container">
        
        <div id="tela-inicial">
            <h1>Ajude-nos a melhorar o nosso atendimento</h1>
            <p>A sua avalia√ß√£o leva menos de 1 minuto e √© essencial para a Rio Quality.</p>
            <button onclick="ativarTelaCheia()" style="background:none; border:none; color:#ffffff; font-size:12px; margin-bottom:10px; cursor:pointer;">
        [ tela cheia ]
    </button>
            <div class="botoes-wrapper">
                <button class="btn-main btn-cliente" onclick="escolherPerfil('CLIENTE')">
                    <span class="icon">üë§</span>
                    <span class="btn-label">Sou Cliente</span>
                </button>
                <button class="btn-main btn-fornecedor" onclick="escolherPerfil('FORNECEDOR')">
                    <span class="icon">üöö</span>
                    <span class="btn-label">Sou Fornecedor</span>
                </button>
            </div>
        </div>

        <div id="tela-avaliacao">
            <h2 id="titulo-avaliacao">Como foi o atendimento?</h2>
            
            <div class="notas-container" id="container-notas">
                </div>

            <textarea id="observacao" 
          placeholder="Toque aqui para digitar..." 
          readonly 
          onclick="abrirTeclado()"></textarea>

            <br>
            <button class="btn-enviar" onclick="enviarAvaliacao()">ENVIAR AVALIA√á√ÉO</button>
            <br>
            <button class="btn-voltar" onclick="voltarInicio()">Cancelar</button>
        </div>

        <div id="tela-agradecimento">
            <div style="font-size: 6rem; color: #009E4D; margin-bottom: 20px;">&#10003;</div>
            <h1>Obrigado!</h1>
            <p>Sua avalia√ß√£o foi recebida com sucesso.</p>
        </div>
<div id="meu-alerta" class="modal-overlay">
    <div class="modal-box">
        <div style="font-size: 3rem; margin-bottom: 10px;">‚ö†Ô∏è</div>
        <div class="modal-titulo">Aten√ß√£o</div>
        <p class="modal-texto" id="msg-alerta">Mensagem de erro aqui</p>
        <button class="btn-modal-ok" onclick="fecharAlerta()">ENTENDI</button>
    </div>
</div>

<div id="teclado-virtual">
    <div class="linha-teclas">
        <button class="tecla" onclick="addLetra('Q')">Q</button>
        <button class="tecla" onclick="addLetra('W')">W</button>
        <button class="tecla" onclick="addLetra('E')">E</button>
        <button class="tecla" onclick="addLetra('R')">R</button>
        <button class="tecla" onclick="addLetra('T')">T</button>
        <button class="tecla" onclick="addLetra('Y')">Y</button>
        <button class="tecla" onclick="addLetra('U')">U</button>
        <button class="tecla" onclick="addLetra('I')">I</button>
        <button class="tecla" onclick="addLetra('O')">O</button>
        <button class="tecla" onclick="addLetra('P')">P</button>
    </div>
    <div class="linha-teclas">
        <button class="tecla" onclick="addLetra('A')">A</button>
        <button class="tecla" onclick="addLetra('S')">S</button>
        <button class="tecla" onclick="addLetra('D')">D</button>
        <button class="tecla" onclick="addLetra('F')">F</button>
        <button class="tecla" onclick="addLetra('G')">G</button>
        <button class="tecla" onclick="addLetra('H')">H</button>
        <button class="tecla" onclick="addLetra('J')">J</button>
        <button class="tecla" onclick="addLetra('K')">K</button>
        <button class="tecla" onclick="addLetra('L')">L</button>
    </div>
    <div class="linha-teclas">
        <button class="tecla" onclick="addLetra('Z')">Z</button>
        <button class="tecla" onclick="addLetra('X')">X</button>
        <button class="tecla" onclick="addLetra('C')">C</button>
        <button class="tecla" onclick="addLetra('V')">V</button>
        <button class="tecla" onclick="addLetra('B')">B</button>
        <button class="tecla" onclick="addLetra('N')">N</button>
        <button class="tecla" onclick="addLetra('M')">M</button>
        <button class="tecla tecla-apagar" onclick="apagarLetra()">‚å´</button>
    </div>
    <div class="linha-teclas">
        <button class="tecla tecla-espaco" onclick="addLetra(' ')">ESPA√áO</button>
        <button class="tecla tecla-fechar" onclick="fecharTeclado()">OK</button>
    </div>
</div>
    </div>

    <script>
        // === L√ìGICA DO SISTEMA ===
        let perfilSelecionado = "";
        let notaSelecionada = 0;

        window.onload = function() {
            const container = document.getElementById('container-notas');
            for (let i = 1; i <= 10; i++) {
                let btn = document.createElement('button');
                btn.innerText = i;
                btn.className = 'btn-nota';

                // Aplica as classes de cor (Vermelho, Amarelo, Verde)
                if (i <= 4) btn.classList.add('nota-ruim');
                else if (i <= 7) btn.classList.add('nota-media');
                else btn.classList.add('nota-boa');

                btn.onclick = function() { selecionarNota(i, btn); };
                container.appendChild(btn);
            }
        };

        function escolherPerfil(tipo) {
            perfilSelecionado = tipo;
            mudarTela('tela-inicial', 'tela-avaliacao');
            let texto = (tipo === 'CLIENTE') ? 'CLIENTE' : 'FORNECEDOR';
            document.getElementById('titulo-avaliacao').innerText = 'ATENDIMENTO AO ' + texto;
        }

        function selecionarNota(valor, elementoBotao) {
            notaSelecionada = valor;
            let botoes = document.getElementsByClassName('btn-nota');
            for (let btn of botoes) btn.classList.remove('selecionado');
            elementoBotao.classList.add('selecionado');
        }

        function enviarAvaliacao() {
            if (notaSelecionada === 0) {
    mostrarAlerta("Por favor, selecione uma nota para continuar."); // <--- SOLU√á√ÉO
    return;
}

            // Mostra texto "Enviando..." no bot√£o para dar feedback
            const btnEnviar = document.querySelector('.btn-enviar');
            const textoOriginal = btnEnviar.innerText;
            btnEnviar.innerText = "Enviando...";
            btnEnviar.disabled = true;

            const observacao = document.getElementById('observacao').value;

            // O ENDERE√áO DO SEU SCRIPT (Cole o link entre as aspas abaixo)
            const scriptURL = "https://script.google.com/macros/s/AKfycbziXFZcw9R_RCsPDAn-LyUP_1IAtGsYgIPzyp3ozg5h2chWZS9lyJkwDPgfHDvjzF_H/exec"; 

            // Pacote de dados para envio
            const dadosParaEnviar = {
                perfil: perfilSelecionado,
                nota: notaSelecionada,
                observacao: observacao
            };

            // O envio real (Fetch)
            fetch(scriptURL, {
                method: 'POST',
                mode: 'no-cors', // Importante para evitar erros de seguran√ßa do navegador
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(dadosParaEnviar)
            })
            .then(() => {
                // Deu tudo certo!
                console.log("Enviado para a planilha!");
                mudarTela('tela-avaliacao', 'tela-agradecimento');
                
                // Restaura o bot√£o
                btnEnviar.innerText = textoOriginal;
                btnEnviar.disabled = false;
                
                setTimeout(resetarSistema, 3000);
            })
            .catch(error => {
                console.error('Erro!', error);
                alert("Houve um erro ao salvar, mas obrigado pela tentativa!");
                
                // Mesmo com erro, vamos reiniciar para n√£o travar a fila
                mudarTela('tela-avaliacao', 'tela-agradecimento');
                setTimeout(resetarSistema, 3000);
            });
        }

        function voltarInicio() { resetarSistema(); }

        function resetarSistema() {
    perfilSelecionado = "";
    notaSelecionada = 0;
    
    // 1. Limpa o campo de texto
    document.getElementById('observacao').value = "";
    
    // 2. Tira a sele√ß√£o das notas (bolinhas)
    let botoes = document.getElementsByClassName('btn-nota');
    for (let btn of botoes) btn.classList.remove('selecionado');
    
    // 3. Garante que o Teclado Virtual est√° fechado
    document.getElementById('teclado-virtual').style.display = 'none';

    // 4. CORRE√á√ÉO DO BUG: For√ßa os elementos da tela inicial a aparecerem de novo
    // (Mesmo que tenham sido escondidos pelo teclado anteriormente)
    document.querySelector('h1').style.display = 'block';
    document.querySelector('p').style.display = 'block';
    
    // Importante: Os bot√µes usam 'flex' para ficar lado a lado, n√£o 'block'
    document.querySelector('.botoes-wrapper').style.display = 'flex'; 

    // 5. Troca as telas
    document.getElementById('tela-agradecimento').style.display = 'none';
    document.getElementById('tela-avaliacao').style.display = 'none';
    document.getElementById('tela-inicial').style.display = 'block';
}

        function mudarTela(atual, proxima) {
            document.getElementById(atual).style.display = 'none';
            let prox = document.getElementById(proxima);
            prox.style.display = 'block';
            prox.style.opacity = 0;
            let op = 0.1;
            let timer = setInterval(function () {
                if (op >= 1) clearInterval(timer);
                prox.style.opacity = op;
                op += op * 0.1;
            }, 10);
        }
        function ativarTelaCheia() {
    var elem = document.documentElement;
    if (elem.requestFullscreen) {
        elem.requestFullscreen();
    } else if (elem.webkitRequestFullscreen) { /* Chrome, Safari e Opera antigos */
        elem.webkitRequestFullscreen();
    } else if (elem.msRequestFullscreen) { /* IE/Edge antigos */
        elem.msRequestFullscreen();
    }
}

function mostrarAlerta(mensagem) {
    document.getElementById('msg-alerta').innerText = mensagem;
    document.getElementById('meu-alerta').style.display = 'flex';
}

function fecharAlerta() {
    document.getElementById('meu-alerta').style.display = 'none';
}

function abrirTeclado() {
    document.getElementById('teclado-virtual').style.display = 'flex';
    
    // Se estiver na horizontal, esconde o t√≠tulo e o subt√≠tulo para ganhar espa√ßo
    if (window.innerHeight < window.innerWidth) {
        document.querySelector('h1').style.display = 'none';
        document.querySelector('p').style.display = 'none';
        
        // Esconde tamb√©m os bot√µes de perfil para focar s√≥ no texto
        document.querySelector('.botoes-wrapper').style.display = 'none'; 
    }

    // Rola para o campo de texto
    document.getElementById('observacao').scrollIntoView({behavior: "smooth"});
}

function fecharTeclado() {
    document.getElementById('teclado-virtual').style.display = 'none';
    
    // Traz tudo de volta ao normal quando fechar
    document.querySelector('h1').style.display = 'block';
    document.querySelector('p').style.display = 'block';
    // Se estiver na tela inicial, os bot√µes voltam. Se estiver na avalia√ß√£o, n√£o precisa.
    // Mas como o teclado s√≥ abre na tela de avalia√ß√£o, podemos deixar assim:
    // (Opcional: Se quiser que os bot√µes voltem apenas na tela inicial, ignore esta linha, 
    // mas o layout da avalia√ß√£o n√£o tem bot√µes grandes, ent√£o tudo bem).
}

function addLetra(letra) {
    let campo = document.getElementById('observacao');
    campo.value += letra;
}

function apagarLetra() {
    let campo = document.getElementById('observacao');
    campo.value = campo.value.slice(0, -1);
}
    </script>

    
</body>
</html>