<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Gest√£o de insumos</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    
    <style>
        .saldo-tag { font-size: 1.1rem; font-weight: bold; padding: 4px 12px; border-radius: 20px; background: #e9ecef; color: #333; }
        .saldo-baixo { background: #f8d7da; color: #721c24; animation: pulse 2s infinite; }
        .lista-suspensa { width: 100%; padding: 12px; border: 1px solid var(--border-color); border-radius: 6px; background: var(--bg-color); color: var(--text-color); margin-bottom: 15px; font-size: 1rem; }
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.7; } 100% { opacity: 1; } }
        
        /* Grid para o formul√°rio de entrada ficar organizado */
        .form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
    </style>
</head>
<body>

    <header>
        <div class="logo-area">
            <span class="material-icons">inventory</span> GEST√ÉO DE INSUMOS
        </div>
        <div class="nav-links">
            <a href="index.html" class="btn-nav"><span class="material-icons">dashboard</span> Painel</a>
            <a href="relatorios_insumos.html" class="btn-nav" style="background:rgba(255,255,255,0.15); border:1px solid rgba(255,255,255,0.3);">
                <span class="material-icons">history</span> Hist√≥rico
            </a>
        </div>
    </header>

    <main class="container">
        
        <div class="kpi-container" style="grid-template-columns: repeat(2, 1fr);">
            <div class="kpi-card c-verde"><div class="info"><h3>Itens Cadastrados</h3><span id="kpi-ok">0</span></div></div>
            <div class="kpi-card c-roxo"><div class="info"><h3>Estoque Cr√≠tico</h3><span id="kpi-baixo">0</span></div></div>
        </div>

        <div class="action-panels">
            
            <div class="card border-success">
                <h2><span class="material-icons txt-success">add_box</span> Entrada / Cadastro</h2>
                
                <div class="form-grid">
                    <div>
                        <label>C√≥digo (SKU):</label>
                        <input type="text" id="ent-cod" placeholder="Ex: 10050" autofocus autocomplete="off">
                    </div>
                    <div>
                        <label>Embalagem:</label>
                        <input type="text" id="ent-emb" list="lista-emb" placeholder="Ex: CX, UN, RL">
                        <datalist id="lista-emb">
                            <option value="UN">Unidade</option>
                            <option value="CX">Caixa</option>
                            <option value="PCT">Pacote</option>
                            <option value="RL">Rolo</option>
                            <option value="KG">Quilo</option>
                        </datalist>
                    </div>
                </div>

                <label>Descri√ß√£o do Produto:</label>
                <input type="text" id="ent-desc" placeholder="Ex: FITA ADESIVA TRANSPARENTE..." autocomplete="off">

                <label>Quantidade a adicionar:</label>
                <input type="number" id="ent-qtd" placeholder="Ex: 10" min="1">

                <button class="btn-success" onclick="realizarEntrada()">‚ûï SALVAR NO ESTOQUE</button>
            </div>

            <div class="card border-primary">
                <h2><span class="material-icons txt-primary">outbound</span> Retirada</h2>
                
                <label>1. Bipe o Crach√°:</label>
                <input type="text" id="sai-cracha" placeholder="Ex: 1020" autocomplete="off">

                <label>2. Selecione o Produto:</label>
                <select id="sai-item" class="lista-suspensa">
                    <option value="">Carregando lista...</option>
                </select>

                <label>3. Quantidade:</label>
                <div style="display:flex; gap:10px; align-items:center;">
                    <input type="number" id="sai-qtd" value="1" min="1" style="margin:0;">
                    <span id="label-saldo" style="font-size:0.9rem; font-weight:bold; color:#7f8c8d;">Disp: -</span>
                </div>

                <button class="btn-primary" style="margin-top:15px;" onclick="realizarSaida()">CONFIRMAR SA√çDA</button>
            </div>

        </div>

        <div class="card border-neutral">
            <div class="table-header">
                <h2><span class="material-icons txt-neutral">list</span> Estoque Atual</h2>
                <input type="text" id="filtro" placeholder="üîç Buscar c√≥digo ou nome..." class="search-bar" onkeyup="filtrar()">
            </div>
            <table>
                <thead>
                    <tr>
                        <th style="width: 15%;">C√≥d.</th>
                        <th>Descri√ß√£o</th>
                        <th style="width: 10%;">Emb.</th>
                        <th style="width: 15%;">Saldo</th>
                        <th style="text-align:right">A√ß√£o</th>
                    </tr>
                </thead>
                <tbody id="tabela-corpo"></tbody>
            </table>
        </div>

    </main>

    <script type="module" src="auth_guard.js"></script>
    <script type="module" src="admin_insumos.js"></script>
</body>
</html>